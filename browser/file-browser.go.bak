// package browser

// func ItemBrowser(srv *drive.Service, path string, debug_mode bool) error {
// 	if content, err := ui.RunWithSpinner(func() (any, error) {
// 		if ret, err := api.GetFolderContent(srv, path); err != nil {
// 			return nil, api.ToHumanReadableError(err, debug_mode)
// 		} else {
// 			return ret, nil
// 		}
// 	},
// 		"loading",
// 		"unable to get directory content",
// 		"",
// 		debug_mode,
// 	); err != nil {
// 		return err
// 	} else {
// 		filelist := content.(*drive.FileList)
// 		names_str := ui.StringizeItemList(filelist, "%icon% %shared% %name% %size%")
// 		picker_title := path
// 		is_root := false
// 		if picker_title == "" {
// 			picker_title = "/"
// 			is_root = true
// 		} else {
// 			names_str = append([]string{"󰉋  /", "󰉋  .."}, names_str...)
// 		}
// 		if choice, err := ItemPicker(names_str, picker_title, is_root); err != nil {
// 			return err
// 		} else {
// 			if choice < 0 {
// 				return nil
// 			}
// 			if !is_root && choice == 0 {
// 				return ItemBrowser(srv, "", debug_mode)
// 			} else if !is_root && choice == 1 {
// 				paths := strings.Split(path, "/")
// 				if len(paths) == 1 {
// 					return ItemBrowser(srv, "", debug_mode)
// 				} else if len(paths) > 1 {
// 					return ItemBrowser(srv, strings.Join(paths[:len(paths)-1], "/"), debug_mode)
// 				} else {
// 					return fmt.Errorf("invalid path: %s", path)
// 				}
// 			} else if !is_root {
// 				choice -= 2
// 			}
// 			picked := filelist.Files[choice]
// 			if picked.MimeType == "application/vnd.google-apps.folder" {
// 				return ItemBrowser(srv, fmt.Sprintf("%s/%s", path, picked.Name), debug_mode)
// 			}
// 			return nil
// 		}
// 	}
// }
